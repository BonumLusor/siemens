<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adicionar Novo Componente</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="container" style="overflow: auto !important;">
    <div class="header">
        <a href="/" style="text-decoration: none; color: white;">
            <div class="logo-container">
                 <h1 id="logo">Acqua<span>No</span><span>bi</span><span>lis</span></h1>
            </div>
        </a>
        <p>‚ûï Adicionar Novo Componente</p>
    </div>

    <div class="form-container">
        <form id="componentForm">
            <!-- GRUPO -->
            <div class="section">
                <h2 class="section-title">1. Grupo do Produto</h2>
                <div class="form-group">
                    <label for="groupSelection">O item pertence a um grupo existente ou a um novo?</label>
                    <select id="groupSelection" name="groupSelection">
                        <option value="existente">Grupo Existente</option>
                        <option value="novo">Novo Grupo</option>
                    </select>
                </div>

                <div id="existing-group-section">
                    <div class="form-group">
                        <label for="group">Selecione o Grupo <span class="required">*</span></label>
                        <select id="group" name="group" required>
                            <!-- Op√ß√µes carregadas dinamicamente -->
                        </select>
                    </div>
                </div>

                <div id="new-group-section" style="display: none;">
                    <div class="form-group">
                        <label for="new_group_name">Nome do Novo Grupo <span class="required">*</span></label>
                        <input type="text" id="new_group_name" name="new_group_name" placeholder="Ex: Inversores de Frequ√™ncia">
                    </div>
                </div>
            </div>
            
            <!-- CATEGORIA E PRODUTO (COMBINADOS) -->
            <div class="section">
                <h2 class="section-title">2. Categoria e Produto</h2>
                
                <!-- Campos da Categoria -->
                <div class="form-group">
                    <label for="categoria_nome">Nome da Categoria/Fam√≠lia <span class="required">*</span></label>
                    <input type="text" id="categoria_nome" name="categoria_nome" required placeholder="Ex: SIRIUS 3RV2 (Disjuntores)">
                </div>
                 <div class="form-group">
                    <label for="categoria_descricao">Descri√ß√£o da Categoria (Opcional)</label>
                    <textarea id="categoria_descricao" name="categoria_descricao" rows="3" placeholder="Descri√ß√£o detalhada da fam√≠lia de produtos..."></textarea>
                </div>
                <div class="form-group">
                    <label>Depend√™ncias da Categoria:</label>
                    <div class="checkbox-label" style="padding-bottom: 10px;">
                        <input type="checkbox" id="dependente_motor" name="dependente_motor">
                        A compatibilidade depende da corrente do motor (Ex: Disjuntores)
                    </div>
                     <div class="checkbox-label">
                        <input type="checkbox" id="dependente_tensao" name="dependente_tensao">
                        A compatibilidade depende da tens√£o da rede (Ex: Fontes)
                    </div>
                </div>
                
                <hr style="margin: 20px 0;">

                <!-- Campos do Produto (Anteriormente 'Varia√ß√£o') -->
                <h3 style="margin-bottom: 15px;">Dados do Produto Final</h3>
                <div class="form-group">
                    <label for="produto_nome">Nome do Produto <span class="required">*</span></label>
                    <input type="text" id="produto_nome" name="produto_nome" required placeholder="Ex: Disjuntor (Parafuso) 0,11-0,16A">
                </div>
                 <div class="form-row">
                    <div class="form-group">
                        <label for="produto_codigo">C√≥digo do Produto <span class="required">*</span></label>
                        <input type="text" id="produto_codigo" name="produto_codigo" required placeholder="Ex: 3RV2011-0AA10">
                    </div>
                    <div class="form-group">
                        <label for="produto_preco">Pre√ßo (R$) <span class="required">*</span></label>
                        <input type="number" id="produto_preco" name="produto_preco" step="0.01" required placeholder="174.48">
                    </div>
                </div>
                 <div class="form-group">
                    <label for="produto_detalhes">Outros Detalhes (JSON)</label>
                    <textarea id="produto_detalhes" name="produto_detalhes" rows="4" placeholder='{ "faixa_ajuste_A": "0,11-0,16", "tipo_conexao": "parafuso" }'></textarea>
                    <small class="help-text">Insira aqui campos extras (ex: faixa_ajuste_A, corrente_ac3_A, dimensoes) que ser√£o usados para filtros e exibi√ß√£o.</small>
                </div>
            </div>

            <div class="form-actions">
                <a href="/" class="btn btn-secondary">‚Üê Voltar</a>
                <button type="submit" class="btn btn-success">üíæ Salvar Componente</button>
            </div>
        </form>
    </div>

    <!-- Carrega os mesmos scripts de api.js e ui.js para reutilizar as fun√ß√µes -->
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/adicionar-produto.js"></script>
</body>
</html>
